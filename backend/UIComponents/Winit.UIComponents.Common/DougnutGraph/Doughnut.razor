@page "/DoughnutChart"
@using Microsoft.JSInterop
@using Newtonsoft.Json
@using Winit.UIModels.Common.GraphModels
@inject IJSRuntime JSRuntime


    <div class="cls_container_div1" >
        <canvas id="myDoughnutChart" width="100%" height="300px"></canvas>
    </div>


@code {
    [Parameter]
    public List<DoughnutModel> DataSource { get; set; }
    [Parameter]
    public string CenterText { get; set; }
    [Parameter]
    public string CentreValue { get; set; }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await LoadDoughnutChart();
        }
    }
    public async Task LoadDoughnutChart()
    {
        var jsonData = JsonConvert.SerializeObject(DataSource);
        Console.WriteLine("Serialized JSON Data: " + jsonData);
        await JSRuntime.InvokeAsync<object>("DoughnutChart", "myDoughnutChart", jsonData, CenterText, CentreValue);
    }
}

