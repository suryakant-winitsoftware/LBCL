@using System.ComponentModel.DataAnnotations
@using System.Linq
@using Microsoft.JSInterop
@inject NavigationManager NavManager
@using Newtonsoft.Json
@inject IStringLocalizer<LanguageKeys> Localizer
@using Microsoft.Extensions.Localization
@using Winit.UIComponents.Common.LanguageResources.Web
@inject Winit.UIComponents.Common.Language.ILanguageService _languageService
@if (isDialogOpen)
{
    <div class="modal-backdrop fade show"></div>
    <div class="modal fade show" tabindex="-1" style="display: block; overflow:auto; ">
    <div class="modal-dialog cls_pop_up_style1">
        <div class="modal-content" >
            <div class="modal-header">
                <h5 class="modal-title">@Localizer["add_product"]</h5>
                    <span class="close" @onclick="CloseDialog">&times;</span>
            </div>
                <div class="modal-body">

                    <div class="row" style="padding: 0px;">
                
                        <div class="col-md-4 cls_padd_l_b">


                            <label class="cls_new_lab"> @((SelectedCategoryType != null) ? @Localizer["selected_category_type_:"] + " " + $"{SelectedCategoryType}" : @Localizer["no_category_selected"])</label>

                        <Winit.UIComponents.Common.CustomControls.DropDown DataSource="ListForddlCatType" Title=@Localizer["category_type"] IsButtonVisible="true" OnSelect="OnselectCategoryType" IsSearchable="true" />
                    </div>
                    
                        <div class="col-md-4 cls_padd_l_b">


                            <label class="cls_new_lab">
                            @((SelectedCategory != 0) ? @Localizer["selected_category:"] + " " + $"{SelectedCategory}" : @Localizer["no_category_selected"])</label>
                        <Winit.UIComponents.Common.CustomControls.DropDown DataSource="SelectedListForCategory" Title=@Localizer["category"] IsButtonVisible="true" OnSelect="OnselectCategory" IsSearchable="true" _SelectionMode="Shared.Models.Enums.SelectionMode.Multiple" />
                        @* <Winit.UIComponents.Common.CustomControls.DropDown DataSource="ListForddlCatType" IsButtonVisible="true" OnSelect="OnselectCategoryType" IsSearchable="true" /> *@
                    </div>

                
                @* <div>
            <input type="checkbox" @onchange="PromoCheckboxChange" />
            <label for="promoCheckbox">Show Promo Records</label>
            </div> *@
                <div style="margin-top: 10px">
                    <Winit.UIComponents.Common.CustomControls.WinitTextBox Placeholder=@Localizer["search_by_sku_code/name"] MaxLength="50" DebounceInterval="500" OnDebounceIntervalElapsed="ApplySearch"
                                                                           KeyboardType="Winit.Shared.Models.Enums.InputType.Text"
                                                                                   Value="@SearchText" IsForSearch="true" />
                </div>


            </div>
            <div class="div1">

                <table >
                    <thead>
                        <tr>
                            <th >
                                <input type="checkbox" @onchange="ToggleAllRows" checked="@CheckAllRows" />
                            </th>
                            <th >@Localizer["sku_name"]</th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (DisplaySKUs == null || DisplaySKUs.Count == 0)
                        {
                            <tr>
                                <td colspan="2">@Localizer["no_sku_available"]</td>
                            </tr>
                        }
                        else
                        {
                            @foreach (var row in DisplaySKUs)
                            {
                                <tr>
                                    <td>
                                        <input type="checkbox" @bind="row.IsSelected" @onclick="() => ToggleRow(row)" />
                                    </td>
                                    <td>@($"[{row.Code}] {row.Label}")</td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>
                </div>
            </div>

                <div class="modal-footer">
                    <div style="float:left">

                        <button class="cls_comman_btn" @onclick="AddSelectedProduct" >
                    @Localizer["add_selected_product"] 
                </button>
                    </div>
                </div>
            
        </div>
    </div>
    </div>
}
