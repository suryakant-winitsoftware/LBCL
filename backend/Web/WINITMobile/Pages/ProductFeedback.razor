@page "/product-feedback"
@inherits WINITMobile.Pages.Base.BaseComponentBase
@inject WINITMobile.Data.IImageUploadService _imageUploadService
@inject Winit.Modules.ProductFeedback.BL.Interfaces.IProductFeedbackViewModel _viewModel

<div class="container-fluid">
    <div class="feedback-form mt-3">
        <div class="form-section mb-4">
            <div class="section-header">Product Feedback</div>

            <!-- Store Selection -->
            @*  <div class="form-group mb-3">
                <label class="form-label">Select Store</label>
                <select class="form-control" @onchange="OnStoreSelected" value="@selectedStore">
                    <option value="">Select a store...</option>
                    <option value="store1">Store 1</option>
                    <option value="store2">Store 2</option>
                    <option value="store3">Store 3</option>
                </select>
            </div> *@
            <div class="form-group mb-3">
                <div class="form-group" style="">
                    <label class="form-label">Select Store</label>
                    <Winit.UIComponents.Common.CustomControls.DropDown DataSource="_viewModel.storeItemViews"
                                                                       OnSelect="OnStoreSelected"
                                                                       Title="Store"
                                                                       _SelectionMode="Winit.Shared.Models.Enums.SelectionMode.Single"
                                                                       IsButtonVisible="true" />
                </div>
            </div>

            <!-- SKU Selection -->
            @* <div class="form-group mb-3">
                <label class="form-label">Select SKU</label>
                <select class="form-control" @onchange="OnSkuSelected" value="@selectedSku">
                    <option value="">Select a SKU...</option>
                    <option value="sku1">SKU 001</option>
                    <option value="sku2">SKU 002</option>
                    <option value="sku3">SKU 003</option>
                </select>
            </div> *@
            <div class="form-group mb-3">
                <div class="form-group" style="">
                    <label class="form-label">Select SKU</label>
                    <Winit.UIComponents.Common.CustomControls.DropDown DataSource="_viewModel.skuItemViews.OrderBy(p => p.Label).ToList()"
                                                                       OnSelect="OnSkuSelected"
                                                                       Title="SKU"
                                                                       _SelectionMode="Winit.Shared.Models.Enums.SelectionMode.Single"
                                                                       IsButtonVisible="true" />
                </div>
            </div>

            <!-- Feedback Options -->
            @* <div class="form-group mb-3">
                <label class="form-label">Feedback on</label>
                <select class="form-control" @onchange="OnFeedbackTypeSelected">
                    <option value="">Select feedback type...</option>
                    <option value="size">Size</option>
                    <option value="smell">Smell</option>
                    <option value="Insect">Insect</option>
                    <option value="Hair">Hair</option>
                    <option value="Other">Other</option>
                </select>
            </div> *@

            <div class="form-group mb-3">
                <div class="form-group" style="">
                    <label class="form-label">Feedback on</label>
                    <Winit.UIComponents.Common.CustomControls.DropDown DataSource="feedbackDataSource"
                                                                       OnSelect="OnFeedbackTypeSelected"
                                                                       Title="Feedback On"
                                                                       _SelectionMode="Winit.Shared.Models.Enums.SelectionMode.Multiple"
                                                                       IsButtonVisible="true" />
                </div>
            </div>

            <!-- Selected Feedback Display -->
            @if (showOthersTextBox)
            {
                <div class="form-group mb-3">
                    <label class="form-label">Other Remarks</label>
                    <input type="text" class="form-control" placeholder="Enter Other Remarks" @bind=@productFeedbackItem.OtherRemarks />
                </div>
            }

            <div class="form-group mb-3">
                <label class="form-label">End Customer Name</label>
                <input type="text" class="form-control" placeholder="Enter End Customer Name" @bind=@productFeedbackItem.EndCustomerName />
            </div>

            <div class="form-group mb-3">
                <label class="form-label">Mobile Number</label>
                <input type="number" maxlength="10" class="form-control" placeholder="Enter Mobile Number" @bind=@productFeedbackItem.MobileNumber />
            </div>
           

            <!-- Image Capture Section -->
            <div class="form-group mb-3">
                <label class="form-label">Capture Image (Front & Back)</label>
                <div class="image-capture-area">
                    <FileCapture OnImageDeleteClick="OnImageDeleteClick"
                                 OnImageCapture="OnImageCapture"
                                 FolderPath=@ImgFolderPath
                                 FileName="ProductFeedback"
                                 CaptureData="fileCaptureData">
                    </FileCapture>

                </div>
            </div>

            <!-- Submit Button -->
          
        </div>
    </div>
</div>
<div class="cls_dashboard_7">
    <button class="cls_continue_btn" @onclick="HandleSubmit">Submit</button>
</div>
<style>
    .form-section {
        background: #fff;
        float: left;
        width: 100%;
        border: 1px solid #ccc;
        position: relative;
        padding: 10px 10px 10px 10px;
        border-radius: 10px;
    }
    .form-group{padding:0px;width:100%;float:left;}
    .feedback-form {
        background: #fff;
        padding:0px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .section-header {
        font-size:18px;
        font-weight: 600;
        color: #333;
        margin-bottom:7px;
        text-align: left;
    }

    .form-label {
        font-weight: 500;
        color: #555;
        margin-bottom:1px;
    }

    .form-control {
        border: 1px solid #ddd;
        border-radius: 6px;
        padding: 10px;
        width: 100%;
        margin-bottom: 10px;
    }

    .selected-feedback {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
    }

    .feedback-tag {
        background: #e3f2fd;
        color: #1976d2;
        padding: 6px 12px;
        border-radius: 16px;
        font-size: 0.9rem;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 6px;
    }

        .feedback-tag i {
            font-size: 0.8rem;
        }

        .feedback-tag:hover {
            background: #bbdefb;
        }

    .image-capture-buttons {
        display: flex;
        gap: 10px;
        margin-top: 10px;
    }

    .btn-outline-primary {
        border: 1px solid #1976d2;
        color: #1976d2;
        background: white;
        padding: 8px 16px;
        border-radius: 6px;
        flex: 1;
    }

    .btn-primary {
        background:#19298B;
        color: white;
        border: none;
        padding: 12px;
        border-radius: 6px;
        font-weight: 500;
    }

    .form-actions {
        margin-top: 30px;
    }
</style> 