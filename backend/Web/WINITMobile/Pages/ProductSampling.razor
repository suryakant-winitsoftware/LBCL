@page "/product-sampling"
@inherits WINITMobile.Pages.Base.BaseComponentBase
@inject Winit.Modules.FileSys.BL.Interfaces.IFileSysBL _fileSysBL
@inject WINITMobile.Data.IImageUploadService _imageUploadService
@inject Winit.Modules.ProductFeedback.BL.Interfaces.IProductFeedbackViewModel _viewModel

<div class="container-fluid">
    <div class="feedback-form mt-3">
        <div class="form-section mb-4">
            <div class="section-header">Product Sampling</div>

            <div class="form-group mb-3">
                <div class="form-group" >
                    <label class="form-label">Select Store</label>
                    <Winit.UIComponents.Common.CustomControls.DropDown DataSource="_viewModel.storeItemViews"
                                                                       OnSelect="OnStoreSelected"
                                                                       Title="Store"
                                                                       _SelectionMode="Winit.Shared.Models.Enums.SelectionMode.Single"
                                                                       IsButtonVisible="true" />
                </div>
            </div>
            <div class="form-group mb-3">
                <div class="form-group">
                    <label class="form-label">Select SKU</label>
                    <Winit.UIComponents.Common.CustomControls.DropDown DataSource="_viewModel.skuItemViews.OrderBy(p => p.Label).ToList()"
                                                                       OnSelect="OnSkuSelected"
                                                                       Title="SKU"
                                                                       _SelectionMode="Winit.Shared.Models.Enums.SelectionMode.Single"
                                                                       IsButtonVisible="true" />
                </div>
            </div>

            <div class="form-group mb-3">
                <label class="form-label">Selling Price</label>
                <input type="text" inputmode="numeric" pattern="[0-9]*" maxlength="8" class="form-control" placeholder="Enter Selling Price" @bind=@productSamplingItem.SellingPrice onkeypress="return event.charCode >= 48 && event.charCode <= 57" />
            </div>
            <div class="form-group mb-3">
                <label class="form-label">Units Used</label>
                <input type="text" inputmode="numeric" pattern="[0-9]*" maxlength="8" class="form-control" placeholder="Enter Units Used" @bind=@productSamplingItem.UnitsUsed onkeypress="return event.charCode >= 48 && event.charCode <= 57" />
            </div>
            
            <div class="form-group mb-3">
                <label class="form-label">Units Sold</label>
                <input type="text" inputmode="numeric" pattern="[0-9]*" maxlength="8" class="form-control" placeholder="Enter Units Sold" @bind=@productSamplingItem.UnitsSold onkeypress="return event.charCode >= 48 && event.charCode <= 57" />
            </div>
            
            <div class="form-group mb-3">
                <label class="form-label">No of Customers Approached</label>
                <input type="text" inputmode="numeric" pattern="[0-9]*" maxlength="8" class="form-control" placeholder="Enter Units Sold" @bind=@productSamplingItem.NoOfCustomersApproached onkeypress="return event.charCode >= 48 && event.charCode <= 57" />
            </div>

            <!-- Image Capture Section -->
            <div class="form-group mb-3">
                <label class="form-label">Capture Image (Front & Back)</label>
                <div class="image-capture-area">
                    <FileCapture OnImageDeleteClick="OnImageDeleteClick"
                                 OnImageCapture="OnImageCapture"
                                 FolderPath=@ImgFolderPath
                                 FileName="ProductSampling"
                                 CaptureData="fileCaptureData">
                    </FileCapture>

                </div>
            </div>

            <!-- Submit Button -->
        
        </div>
    </div>
</div>
<div class="cls_dashboard_7">
    <button class="cls_continue_btn" @onclick="HandleSubmit">Submit</button>
</div>

<style>
    .form-section {
        background: #fff;
        float: left;
        width: 100%;
        border: 1px solid #ccc;
        position: relative;
        padding: 10px 10px 10px 10px;
        border-radius: 10px;
    }
    .form-group{padding:0px;width:100%;float:left;}
    .feedback-form {
        background: #fff;
        padding:0px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .section-header {
        font-size:18px;
        font-weight: 600;
        color: #333;
        margin-bottom:7px;
        text-align: left;
    }

    .form-label {
        font-weight: 500;
        color: #555;
        margin-bottom:1px;
    }

    .form-control {
    float: left;
    width: 100%;
    height: 35px;
    border: 1px solid #848484 !important;
    border-radius: 5px;
    margin-top: 4px;
    cursor: pointer;
    background-color: #FFFFFF !important;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;font-size:13px;
    }

    .selected-feedback {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
    }

    .feedback-tag {
        background: #e3f2fd;
        color: #1976d2;
        padding: 6px 12px;
        border-radius: 16px;
        font-size: 0.9rem;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 6px;
    }

        .feedback-tag i {
            font-size: 0.8rem;
        }

        .feedback-tag:hover {
            background: #bbdefb;
        }

    .image-capture-buttons {
        display: flex;
        gap: 10px;
        margin-top: 10px;
    }

    .btn-outline-primary {
        border: 1px solid #1976d2;
        color: #1976d2;
        background: white;
        padding: 8px 16px;
        border-radius: 6px;
        flex: 1;
    }

    .btn-primary {
        background:#19298B;
        color: white;
        border: none;
        padding: 12px;
        border-radius: 6px;
        font-weight: 500;
    }

    .form-actions {
        margin-top: 30px;
    }
</style> 