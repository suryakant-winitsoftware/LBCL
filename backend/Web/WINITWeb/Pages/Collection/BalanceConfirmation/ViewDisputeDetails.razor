@page "/viewdispute"
@inject Winit.Modules.CollectionModule.BL.Interfaces.IBalanceConfirmationViewModel _balanceConfirmationViewmodel
@inherits WinIt.Pages.Base.BaseComponentBase

<div style="margin-left: 65px;">
    <PageHeaderAndFilter IDataBreadcrumbService="iDataBreadcrumbService"></PageHeaderAndFilter>
</div>
@if (IsInitialised)
{
    <div style="margin-left: 60px;">
        <div style="margin-bottom:100px;"></div>
        <div class="card p-3 mb-4" style="width: 1840px;border-radius: 10px;top:-28px;">
            <div class="col-12 d-flex flex-row">
                <div class="col-6 d-flex flex-row">
                    <div class="col-6 d-flex flex-column">
                        <label style="font-weight: 400;">Distributor Code</label>
                        <span style="font-weight: 700;color: #19298B;">@_balanceConfirmationViewmodel.BalanceConfirmationDetails.Store</span>
                    </div>
                    <div class="d-flex flex-column">
                        <label style="font-weight: 400;">Distributor Name</label>
                        <span style="font-weight: 700;color: #19298B;">@_balanceConfirmationViewmodel.BalanceConfirmationDetails.Store</span>
                    </div>
                </div>
                <div class="col-6">
                    <div class="d-flex flex-column">
                        <div>
                            <label style="font-size: 17px;font-weight: 600;">System Closing Balance</label>
                        </div>
                        <div class="d-flex flex-row">
                            <span style="font-weight: 700;font-size: larger;color: #19298B;">@FormatNumberInIndianStyle(_balanceConfirmationViewmodel.BalanceConfirmationDetails.ClosingBalance)</span>
                            <label style="margin-left: 15px;">Closing Balance</label>
                        </div>
                        <div>
                            <span style="font-weight: 500;font-size: medium;">@DateFormat(_balanceConfirmationViewmodel.BalanceConfirmationDetails.GeneratedOn)</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        @foreach (var data in _balanceConfirmationViewmodel.BalanceConfirmationLineDetails.OrderBy(p => p.LineNumber))
        {
            <div style="margin-bottom:30px;"></div>
            <div class="card p-3 mb-4" style="width: 1840px;border-radius: 10px;top:-28px;">
                <div class="d-flex flex-column">
                    <div class="col-2">
                        <label style="font-weight: 600;margin-left:15px;">Scheme @data.LineNumber</label>
                    </div>
                    <div class="d-flex flex-row col-9">
                        <div class="d-flex flex-column col-3">
                            <label style="font-weight: 400;">Scheme Name</label>
                            <label style="font-weight: 700;">@data.SchemeName</label>
                        </div>
                        <div class="d-flex flex-column col-3">
                            <label style="font-weight: 400;">Actual Amount</label>
                            <label style="font-weight: 700;">@data.EligibleAmount</label>
                        </div>
                        <div class="d-flex flex-column col-3">
                            <label style="font-weight: 400;">Amount as per Distributor</label>
                            <label style="font-weight: 700;">@data.ReceivedAmount</label>
                        </div>
                    </div>
                    <div class="d-flex flex-column col-12" style="margin-left:15px;">
                        <label style="font-weight: 400;">Description</label>
                        <p style="font-weight: 600;font-size: smaller;">
                            @data.Description
                        </p>
                    </div>
                </div>
            </div>
        }
        @if (_balanceConfirmationViewmodel.BalanceConfirmationDetails.Status == "Pending")
        {
            <div class="container">
                <div class="d-flex flex-row col-12">
                    <div class="col-6">
                        <button class="cls_wastage_btn" style="height: 100%;width: 120px;float: right;font-size: 14px;" @onclick="Back">
                            Back
                        </button>
                    </div>
                    <div class="col-6">
                        <button class="cls_continue_btn" style="width:140px;font-size:14px;float:inline-start;" @onclick="DisputeResolved">Dispute Resolved</button>
                    </div>
                </div>
            </div>
        }
        <div style="margin-bottom:40px;"></div>
    </div>
}

@if (IsShowPopUp)
{
    <div class="modal fade show" tabindex="-1" style="display: block;">
        <div class="modal-dialog">
            <div class="modal-content" style="padding: 10px; margin-left:0%;border-radius: 13px;top: 140px; height: 400px; width: 700px;">
                <div class="modal-header" style="padding:0px;">
                    <h5 class="modal-title" style="position: relative;font-size: 16px;font-weight: 700;top: 10px;margin-left: 25px;">
                        Dispute Resolved
                    </h5>
                    <div>
                        <button type="button" class="close w-16 h-16" @onclick="Close">
                            <span aria-hidden="true" style="color:#000000;">&times;</span>
                        </button>
                    </div>
                </div>
                <div class="modal-body" style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; padding: 10px;">
                    <div class="cls_place_order">
                        <div class="cls_place_order_top">
                            <div>
                                <div class="d-flex flex-column col-12" style="top: -30px; margin-left: -30px;">
                                    <label style="font-weight:500;">Comment</label>
                                    <textarea @bind="DisputeResolvedRecords.Comments" placeholder="Enter Here" class="area"></textarea>
                                </div>
                                <div class="col-4">
                                    <input type="file" style="margin-left: -30px; border: 1px solid gray;border-radius: 5px; height: 40px;" />
                                </div>
                                <div style="margin-bottom:30px;"></div>
                                <div>
                                    <div class="d-flex flex-row col-12">
                                        <div class="col-6">
                                            <button class="cls_wastage_btn" style="height: 100%;width: 120px;float: right;font-size: 14px;" @onclick="Cancel">
                                                Cancel
                                            </button>
                                        </div>
                                        <div class="col-6">
                                            <button class="cls_continue_btn" style="width:140px;font-size:14px;float:inline-start;" @onclick="Submit">Submit</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}


@if (IsShowSuccessPopUp)
{
    <div class="modal fade show" tabindex="-1" style="display: block;">
        <div class="modal-dialog">
            <div class="modal-content" style="padding: 10px; margin-left:0%;border-radius: 13px;top: 200px;height: 200px;">
                <div class="modal-header" style="padding:0px;border:0px;">
                    <div class="col-12">
                        <button type="button" class="close w-16 h-16" @onclick="Close">
                            <span aria-hidden="true" style="color:#000000;">&times;</span>
                        </button>
                    </div>
                </div>
                <div class="modal-body" style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; padding: 10px;">
                    <div class="cls_place_order">
                        <div class="cls_place_order_top">
                            <div class="cls_place_order_top1" style="position: relative;top: -15px;margin-left: 85px;">
                                <img style="width:72px;" src="/Images/checked1.png" />
                            </div>
                            <div class="cls_place_order_top2">
                                <h6>
                                    Dispute Resolved Successfully
                                </h6>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}

<style>
    /* Dropdown container */
    .dropdown {
        display: block;
        width: 100%;
        height: calc(1.5em + .75rem + 2px);
        padding: .375rem .75rem;
        font-size: 1rem;
        font-weight: 400;
        line-height: 1.5;
        color: #495057;
        background-color: #fff;
        background-clip: padding-box;
        border: 1px solid #ced4da;
        border-radius: .25rem;
        transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;
    }

    .area {
        resize: none;
        width: 600px;
        height: 110px;
        border-radius: 5px;
    }

    .cls_wastage_btn {
        float: left;
        border-radius: 4px;
        border: 1px solid #19298B;
        background: #FFF;
        padding: 7px 9px;
        font-family: Montserrat;
        font-size: 12px;
        font-weight: 600;
        color: #19298B;
        text-decoration: none;
        margin-top: 0px !important;
    }

    .cls_continue_btn {
        width: 100%;
        float: left;
        text-decoration: none;
        background: #19298B;
        color: #fff;
        text-align: center;
        border-radius: 5px;
        padding: 8px;
        border: 0px;
    }
</style>