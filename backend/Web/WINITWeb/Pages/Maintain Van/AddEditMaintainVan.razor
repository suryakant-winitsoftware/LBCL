@page "/AddEditVehicles"
@page "/AddEditVehicles/{VehicleUID}"
@using Microsoft.AspNetCore.Authorization;
@attribute [Authorize]
@inherits WinIt.Pages.Base.BaseComponentBase
@using System.ComponentModel.DataAnnotations
@inject Winit.UIComponents.Common.IAlertService _AlertMessgae;
@using System.Linq
@using Winit.Modules.Vehicle.Model.Interfaces;
@inject Winit.Modules.Vehicle.BL.Interfaces.IAddEditMaintainVanViewModel _addEditMaintainVanViewModel
@using Newtonsoft.Json;

<PageHeaderAndFilter IDataBreadcrumbService="dataService" />

@if(IsLoaded)
{
    <div class="storeupper">
        <div class="tab-content">
            <div class="row mb-2">
                @if (!string.IsNullOrWhiteSpace(validationMessage))
                {
                    <div class="alert alert-danger w-100">
                        <div style="color: red;">@validationMessage</div>
                    </div>
                }
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="vehicleNo">@Localizer["vehicle_no"]</label><span style="color: red;">*</span>
                        <input class="form-control" type="text" @bind-value="_addEditMaintainVanViewModel.VEHICLE.VehicleNo" disabled="@(IsEditPage)">
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="registrationNo">@Localizer["registration_no"]</label><span style="color: red;">*</span>
                        <input class="form-control" type="text" @bind-value="_addEditMaintainVanViewModel.VEHICLE.RegistrationNo">
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="model">@Localizer["model"]</label><span style="color: red;">*</span>
                        <input class="form-control" type="text" @bind-value="_addEditMaintainVanViewModel.VEHICLE.Model">
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="vanSiDate">@Localizer["van_si_date"]</label>
                        <input class="form-control" type="date" @bind-value="_addEditMaintainVanViewModel.VEHICLE.TruckSIDate">
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="roadTaxExpiryDate">@Localizer["road_tax_expiry_date"]</label>
                        <input class="form-control" type="date" @bind-value="_addEditMaintainVanViewModel.VEHICLE.RoadTaxExpiryDate">
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="inspectionDate">@Localizer["inspection_date"]</label>
                        <input class="form-control" type="date" @bind-value="_addEditMaintainVanViewModel.VEHICLE.InspectionDate">
                    </div>
                </div>
                <div class="col-md-4 d-flex align-items-center">
                    <input type="checkbox" class="mr-2" @bind="_addEditMaintainVanViewModel.VEHICLE.IsActive">
                    <span>@Localizer["is_active"]</span>
                </div>
            </div>

            <div class="row mb-2">
                <div class="col-md-12 d-flex justify-content-center">
                    <button class="btn btn-secondary mr-2" @onclick="BackBtnClicked">@Localizer["back"]</button>
                    <button class="btn btn-primary" @onclick="() => SaveVehicle()">@Localizer[IsEditPage ? "update" : "save"]</button>
                </div>
            </div>
        </div>
    </div>

}
@* @if (IsBackBtnPopUp)
{
    <WinIt.Pages.PopUp Title="Back" OnCloseClick="() => IsBackBtnPopUp = false" OkbtnText="Ok" CancelbtnText="Cancel" OnOkClick="OnOkFromBackBTnPopUpClick">
        <label>
            Are you sure you want to cancel? Your work might be lost.
        </label>
    </WinIt.Pages.PopUp>
} *@

@code {
   
}