@page "/SkuGroupHierarchy"
@inherits WinIt.Pages.Base.BaseComponentBase
@inject Winit.Modules.SKU.BL.Interfaces.ISKUGroupViewModel _SKUGroupViewModel


<PageHeaderAndFilter IDataBreadcrumbService="dataService" IsShowFilter="true" ColumnsForFilter="@FilterColumns" IsSearchCriteriaNeeded="true"
                     OnFilterApplied="@OnFilterApply" />


<button class="cls_add_new_sec" @onclick="() => {Context = new Winit.Modules.SKU.Model.UIClasses.SKUGroupItemView(); Context.ItemLevel=0; IsAddSKUGroup = !IsAddSKUGroup; } ">@Localizer["add_new"]</button>
<div class="div1 cls_Hierarchy_1">
    <table style="table-layout:fixed;">
    <thead>
        <tr>
        <th  style="width:5%;">
        </th>
        <th  style="width:40%;">
            <span style="cursor:default;">@Localizer["code_&_name"]</span>
        </th>
        <th  style="width:10%;">
            <span style="cursor:default;">@Localizer["level"]</span>
        </th>
        <th  style="width:10%;">
            <span style="cursor:default;">@Localizer["parent"]</span>
        </th>
            <th style="width:15%;">
            <span style="cursor:default;">SKU Group Type</span>
        </th>
        <th  style="width:20%;">
            <span style="cursor:default;">@Localizer["action"]</span>
        
        </th>
        </tr>
    </thead>
    <tbody>
    <SKUGroupGrid HierarchyGrids="@_SKUGroupViewModel.SKUGroupItemViews" OnBtnExpandClick="GetChildGrid"
                  SupplierSelectionItems="_SKUGroupViewModel.SupplierSelectionItems" OnCreateClick="CreateSKUGroup" OnDeleteSKUGroup="DeleteSKUGroup"
                  OnCreateClone="getClonedISKUGroupItemView" OnUpdateClick="UpdateSKUGroup" OnSKUGroupTypebtnClicked="SKUGroupTypeDDClicked"></SKUGroupGrid>
    </tbody>
    </table>
</div>
@if (IsAddSKUGroup)
{
    <AddUpdateSKUGroupPopUp CancelbtnText=@Localizer["cancel"] OkBtnText=@Localizer["create"] Context="Context" IsAddPopUp="true"
                            OnCloseClick="AddSKUGroupPOPupClosed" OnOkClick="CreateClickedFromHome"
                            Title=@Localizer["add_sku_hierarchy"] OnSKUGroupTypebtnClicked="async () =>{await SKUGroupTypeDDClicked(Context);}"
                            OnSupplierbtnClicked="SupplierDDClicked" />
}
@if (IsSKUGroupTypeDDOpen)
{
    <Winit.UIComponents.Common.CustomControls.DropDown DataSource="SKUGroupTypeSelectionItems"
                                                       Title="Select Group Type"
                                                       IsButtonVisible="false"
                                                       IsSearchable="false"
                                                       OnSelect="SKUGroupTypeSelected"
                                                       ShowPopUp="IsSKUGroupTypeDDOpen" />
}
@if (IsSupplierPopUpOpen)
{
    <Winit.UIComponents.Common.CustomControls.DropDown DataSource="SupplierSelectionItems"
                                                       IsButtonVisible="false"
                                                       IsSearchable="false"
                                                       OnSelect="SupplierSelected"
                                                       Title="Select Supplier" />
}

